<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Example</title>
    <script src="jsPDF-1.3.2/dist/jspdf.min.js"></script>
    <script src="html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>

</head>
<body>
    <button onclick="generatePDF()">Generate PDF</button>

    <script>
        function generatePDF() {
            const doc = new jsPDF();

            // Header
            doc.setFontSize(20);
            doc.text("Header", 80, 15);

            // Body
            // Adding an image
            const img = new Image();
            img.crossOrigin = "Anonymous";
            img.src = 'love.png';

            img.onload = function() {
                const canvas = document.createElement('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                const context = canvas.getContext('2d');
                context.drawImage(img, 0, 0);
                const imageData = canvas.toDataURL('image/jpeg');
                doc.addImage(imageData, 'JPEG', 15, 40, 60, 60);

                // Adding a barcode
                JsBarcode("#barcode", "Hello World!", {
                    format: "CODE128",
                    displayValue: true
                });

                // Adding barcode to PDF
                const barcodeSVG = document.querySelector('#barcode');
                const svgData = barcodeSVG.outerHTML;
                const imgBarcode = new Image();
                imgBarcode.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgData)));

                imgBarcode.onload = function() {
                    const canvasBarcode = document.createElement('canvas');
                    canvasBarcode.width = imgBarcode.width;
                    canvasBarcode.height = imgBarcode.height;
                    const contextBarcode = canvasBarcode.getContext('2d');
                    contextBarcode.drawImage(imgBarcode, 0, 0);
                    const imageDataBarcode = canvasBarcode.toDataURL('image/png');
                    doc.addImage(imageDataBarcode, 'PNG', 15, 120, 100, 30);

                    // Footer
                    const pageCount = doc.internal.getNumberOfPages();
                    doc.setFontSize(10);
                    for (let i = 1; i <= pageCount; i++) {
                        doc.setPage(i);
                        doc.text(`Footer - Page ${i} of ${pageCount}`, 150, 285);
                    }

                    // Save PDF
                    doc.save('professional_example.pdf');
                };
            }
        }
    </script>
</body>
</html>
